<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tela cadastro usuario</title>
    <link rel="stylesheet" href="../assets/css/telaCadastroUsuario.css">

</head>

<body>



    <!--  inicio do container  -->

    <section class="container">

        <!--  topo do pop up  -->

        <div class="topo">
            <div class="titulo"> Cadastro de usu√°rio </div>
            <div class="botaoFechar"><button> x </button></div>
        </div>


        <!--  meio do pop up  -->


        <div class="meioPopUp">
            <div class="divImagemUsuario">
                <img class="imagemUsuario" src="../assents/images/ftUsuario.png" alt="">
            </div>
            <div class="campoInput">
                <label for="">Nome:</label>
                <input placeholder="ex: enzin" id="ipt_nome" type="text">
                <label for="">Email:</label>
                <input placeholder="ex: enzin@gmail.com" id="ipt_email" type="text">
                <label for="">Telefone:</label>
                <input placeholder="(11) 91234-5678" id="ipt_telefone" type="number">
            </div>
        </div>


        <!--  senha e repetir senha  -->

        <div class="campoInputSenha">
            <div class="senha">
                <label for="">Senha:</label> <br>
                <input placeholder="*******" id="ipt_senha" type="password">
            </div>
            <div class="repetir_senha">
                <label for="">Repetir senha:</label> <br>
                <input placeholder="*******" id="ipt_repetirSenha" type="password">
            </div>
        </div>

        <!--  fim do pop up  -->

        <div class="containerFinal">
            <button class="cadastrar" onclick="cadastrar()">cadastrar</button>
        </div>

    </section>

    <!--  inicio do footer  -->

   

</body>

</html>

<script>
    function cadastrar(){
    
    var nomeVAR = ipt_nome.value
    var emailVAR = ipt_email.value
    var telefoneVAR = ipt_telefone.value
    var senhaVAR = ipt_senha.value
    var repetirSenhaVAR = ipt_repetirSenha.value
    
    if(nomeVAR == "" || emailVAR == "" || telefoneVAR == "" || senhaVAR == "" || repetirSenhaVAR == "" ){
alert("preencha todos os campos")
    }else if(senhaVAR != repetirSenhaVAR){
alert("erro ao repetir a senha")
    }else{
        alert("foi")
        fetch("/usuarios/cadastrar",{
        method : "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body:  JSON.stringify({
            nomeServer: nomeVAR,
            emailServer: emailVAR,
            telefoneServer: telefoneVAR,
            senhaServer: senhaVAR,
            repetirSenhaServer: repetirSenhaVAR
        })
    }).then(function (resposta) {
        if(resposta.ok){
            alert("cadastro realizado com sucesso!")
        }else{
            throw ("houve um erro ao tentar se cadastrar");
        }
    }).catch(function (resposta){
        console.log(`#ERRO: ${resposta}`);
    });
        
    }
    }
   
    </script>